<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Carbon Fields</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="">
		<meta name="author" content="">

		<!-- Le styles -->
		<link href="//maxcdn.bootstrapcdn.com/bootstrap/2.2.1/css/bootstrap.min.css" rel="stylesheet">
		<style type="text/css">
			body { padding-top: 20px; padding-bottom: 40px; color: #525252; }
			h4 { margin-top: 30px; }
			p { margin: 10px 0 20px; }
			dl { margin: 15px 0; padding: 20px 19px 10px; border: 1px solid #ddd; border-radius: 3px; }
			dd { margin: 10px 25px; }
			dd p { margin: 8px 0; }
			code { border: 0; background: #f0f2f1; }
			hr { margin: 40px 0; }
			li { margin: 5px 0; }
			footer p { text-align: right; }

			.sidebar-nav { padding: 9px 0; }
			.hero-unit { padding-left: 0; background-color: transparent; padding-top: 0; }
			.hero-unit h1 { line-height: 64px; }
			.hero-unit img { margin-right: 40px; vertical-align: top; }
			.cf-nav { position: fixed; }
			.scrollable { overflow-y: scroll; max-height: 90%; }
			.field-docs:after { content: ""; display: block; margin: 40px 0; border-bottom: solid 1px #eee; } 
			.field-docs:last-child:after { border-bottom: 0; }
			.prettyprint { margin-top: 5px; } 

			.left-hash a { position: relative; color: #525252; text-decoration: none; }
			.left-hash a:hover:before { opacity: 1; }
			.left-hash a:before { content: "#"; position: absolute; margin-left: -25px; color: #0088cc; font-size: 23px; font-weight: normal; opacity: 0.6; }
			
			/* prettify CSS start */
			.pln{color:#000}@media screen{.str{color:#080}.kwd{color:#008}.com{color:#800}.typ{color:#606}.lit{color:#066}.pun,.opn,.clo{color:#660}.tag{color:#008}.atn{color:#606}.atv{color:#080}.dec,.var{color:#606}.fun{color:red}}@media print,projection{.str{color:#060}.kwd{color:#006;font-weight:bold}.com{color:#600;font-style:italic}.typ{color:#404;font-weight:bold}.lit{color:#044}.pun,.opn,.clo{color:#440}.tag{color:#006;font-weight:bold}.atn{color:#404}.atv{color:#060}}pre.prettyprint{padding:2px;border:0;border-radius:3px;padding:1em;}ol.linenums{margin-top:0;margin-bottom:0}li.L0,li.L1,li.L2,li.L3,li.L5,li.L6,li.L7,li.L8{list-style-type:none}li.L1,li.L3,li.L5,li.L7,li.L9{background:#eee}
			/* prettify CSS end */
		</style>
		<link href="//maxcdn.bootstrapcdn.com/bootstrap/2.2.1/css/bootstrap-responsive.min.css" rel="stylesheet">

		<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
	</head>

	<body>
		<div class="container-fluid">
			<div class="row-fluid">
				<div class="span2">
					<div class="well sidebar-nav cf-nav span2 scrollable">
						<ul class="nav nav-list ">
							<li class="nav-header">Carbon Fields</li>
							<li><a href="#Abstract">Abstract Overview</a></li>
							<li class="nav-header">Containers</li>
							<li><a href="#Containers">Usage</a></li>
							<li><a href="#Custom_Fields">Custom Fields</a></li>
							<li><a href="#Theme_Options">Theme Options</a></li>
							<li><a href="#Term_Meta">Term Meta</a></li>
							<li><a href="#User_Meta">User Meta</a></li>
							<li><a href="#Comment_Meta">Comment Meta</a></li>
							<li><a href="#Widgets">Widgets</a></li>
							<li><a href="#Nav_Menu">Nav Menu</a></li>
							<li><a href="#Tabs">Tabs</a></li>

							<li class="nav-header">Fields</li>
							<li><a href="#Fields">Usage</a></li>
							<li><a href="#Field_Text">Text</a></li>
							<li><a href="#Field_Textarea">Textarea</a></li>
							<li><a href="#Field_RichText">Rich Text</a></li>
							<li><a href="#Field_Date">Date</a></li>
							<li><a href="#Field_Color">Color</a></li>
							<li><a href="#Field_Checkbox">Checkbox</a></li>
							<li><a href="#Field_Select">Select</a></li>
							<li><a href="#Field_Radio">Radio</a></li>
							<li><a href="#Field_Set">Set</a></li>
							<li><a href="#Field_Relationship">Relationship</a></li>
							<li><a href="#Field_Association">Association</a></li>
							<li><a href="#Field_File">File</a></li>
							<li><a href="#Field_Image">Image</a></li>
							<li><a href="#Field_Attachment">Attachment</a></li>
							<li><a href="#Field_Map">Map</a></li>
							<li><a href="#Field_Separator">Separator</a></li>
							<li><a href="#Field_Sidebar">Sidebar</a></li>
							<li><a href="#Field_Choose_Sidebar">Choose Sidebar</a></li>
							<li><a href="#Field_HeaderScripts">Header Scripts</a></li>
							<li><a href="#Field_FooterScripts">Footer Scripts</a></li>
							<li><a href="#Field_HTML">HTML</a></li>
							<li><a href="#Field_GravityForm">Gravity Form</a></li>

							<li class="nav-header">Complex Field</li>
							<li><a href="#Complex_Field">Usage</a></li>
							<li><a href="#Single_Group">Single Group</a></li>
							<li><a href="#Multiple_Groups">Multiple Groups</a></li>
							<li><a href="#Nested_Complex_Fields">Nested Complex Fields</a></li>
							
							<li><a href="#Data_Storage">Data Storage</a></li>

							<li class="nav-header">Advanced Topics</li>
							<li><a href="#Extending">Extending</a></li>
							<li><a href="#Templates">Templates</a></li>
							<li><a href="#Hooks">Hooks</a></li>
						</ul>
					</div><!--/.well -->
				</div><!--/span-->
				<div class="span9">
					<div class="hero-unit">
						<h1>Carbon Fields</h1>
					</div>
					<h2 id="Abstract" class="left-hash"><a href="#Abstract">Abstract</a></h2>
					<p>Carbon fields is a library for easy creation of custom(meta) fields in WordPress administration panel. It allows theme developer to associate meta-information with various  entities in a WordPress site(such as posts, taxonomy terms, widgets and so on). </p>

					<p>The main components of the library are:</p>
					<ul>
						<li><strong>Container</strong> - represents group of fields and controls disposition of the fields in the WordPress administration panel. </li>
						<li><strong>Field</strong> - represents single field. </li>
						<li><strong>Data Storage</strong> - controls the underlying data storage for field values. </li>
					</ul>

					<hr>

					<h2 id="Containers" class="left-hash"><a href="#Containers">Containers</a></h2>

					<p>Carbon Container is a group of custom fields and display options. Containers are displayed on different parts of the backend, according to their type and display options.</p>

					<p>Containers have a title, which must be <strong>unique</strong> across the whole WordPress instance. </p>

					<pre class="prettyprint">
Carbon_Container::factory('custom_fields', 'Custom Data')
	-&gt;show_on_post_type('page')
	-&gt;add_fields(array(
		Carbon_Field::factory('map', 'crb_location')-&gt;set_position(37.423156, -122.084917, 14),
		Carbon_Field::factory('choose_sidebar', 'crb_custom_sidebar'),
		Carbon_Field::factory('image', 'crb_photo'),
	));</pre>
					<p>To create a new Carbon Container, you just use the container factory method<code>Carbon_Container::factory($type, $title)</code>, where:<p>

					<dl>
						<dt><code>$type</code></dt>
						<dd><p>Identifier of the container type (accepted values are <code>custom_fields</code> and <code>theme_options</code>)</p></dd>

						<dt><code>$title</code></dt>
						<dd><p>Unique title of the container</p></dd>
					</dl>

					<hr>

					<h3 id="Custom_Fields" class="left-hash"><a href="#Custom_Fields">Custom Fields Container</a></h3>
					<p>Custom Field containers are used to extend the post edit screens with additional fields. Field data is stored separately for each post as post meta (see <a href="http://codex.wordpress.org/Function_Reference/add_post_meta" target="_blank"><i class="icon-globe"></i> add_post_meta</a>). </p>

					<pre class="prettyprint">
Carbon_Container::factory('custom_fields', 'Post Properties')
	-&gt;add_fields(array(
		Carbon_Field::factory('map', 'crb_location')-&gt;set_position(37.423156, -122.084917, 14),
		Carbon_Field::factory('choose_sidebar', 'crb_custom_sidebar'),
	));</pre>


					<h4>Visibility options</h4>
					<p>Custom fields containers are very flexible in terms of display options. You can select specific post type they show on, as well as category, format, parent, etc. A list of all options is displayed below:</p>

					<dl>
						<dt>Post type</dt>
						<dd>
							<p><code>-&gt;show_on_post_type('page')</code></p>
							<p>You can also show a single container on multiple post types, as seen below:</p>
							<p><code>-&gt;show_on_post_type(array('page', 'my_custom_post_type', 'post'))</code></p>
						</dd>

						<dt>Categories and custom taxonomies</dt>
						<dd>
							<p>Containers may be assigned to posts from specific categories or taxonomies:</p>
							<p><code>-&gt;show_on_category($category_slug)</code></p>
							<p><code>-&gt;show_on_taxonomy_term($term_slug, $taxonomy)</code></p>
						</dd>
						
						<dt>Pages and subpages</dt>
						<dd>
							<p>Show container on a specific page, identified by path, for example: <code>"parent-page/sub-page"</code>:</p>
							<p><code>-&gt;show_on_page($page_path)</code></p>

							<p>Show container on all <strong>subpages</strong> of a specific page, identified by path, for example: <code>"parent-page"</code>:</p>
							<p><code>-&gt;show_on_page_children($parent_page_path)</code></p>
						</dd>
						
						<dt>Page templates</dt>
						<dd>
							<p>Containers may be assigned to pages using specific template:</p>
							<p><code>-&gt;show_on_template($template_path)</code></p>
							<p>The <code>$template_path</code> is the name of the template file (or array of template file names), for example: <code>"about_us.php"</code> or <code>array("templates/contact.php", "about_us.php")</code>
							</p>

							<p>You can also hide the container from pages using specific template:</p>
							<p><code>-&gt;hide_on_template($template_path)</code></p>
							<p>where the <code>$template_path</code> is the name of the template file (or array of template file names), as in <code>show_on_template()</code> above.</p>
						</dd>
						
						<dt>Post formats</dt>
						<dd>
							<p>To display a container on posts with specific <a href="http://codex.wordpress.org/Post_Formats"><i class="icon-globe"></i> post format</a>, use:</p>
							<p><code>-&gt;show_on_post_format($post_format)</code></p>
						</dd>

						<dt>Level</dt>
						<dd>
							<p>To display a container on hierarchical posts from a specific level, use:</p>
							<p><code>-&gt;show_on_level($level)</code></p>
							<p>where <code>$level</code> is the level of hierarchy depth, starting from 1 and increasing when going into further hierarchy depth. </p>
						</dd>
					</dl>

					<h4>Container position</h4>

					<p>More information about the position options can be found in the <a href="https://codex.wordpress.org/Function_Reference/add_meta_box"><i class="icon-globe"></i> add_meta_box()</a> function.</p>

					<dl>
						<dt>Context</dt>
						<dd>
							<p>The part of the page where the container should be shown ('normal' (default), 'advanced', or 'side')</p>
							<p><code>-&gt;set_context('normal')</code></p>
						</dd>

						<dt>Priority</dt>
						<dd>
							<p>The priority within the context where the container should show ('high' (default), 'core', 'default' or 'low')</p>
							<p><code>-&gt;set_priority('high')</code></p>
						</dd>
					</dl>
								
					<h4>Accessing field values</h4>
					<p>To access field values you need to use the function <code>carbon_get_post_meta($id, $name, $type = null)</code>, where: </p>
					<dl>
						<dt><code>$id</code></dt>
						<dd>Post ID where your value was entered.</dd>

						<dt><code>$name</code></dt>
						<dd>The name of the field to be retrieved.</dd>

						<dt><code>$type</code> <small>(optional)</small></dt>
						<dd>If the field you want to retrieve is of type complex, you need to pass <code>"complex"</code>.</dd>
					</dl>

					<pre class="prettyprint">
&lt;!-- Simple field --&gt;
&lt;p&gt;Article was published in: &lt;?php echo carbon_get_post_meta($article->ID, 'crb_location'); ?&gt;&lt;/p&gt;

&lt;!-- Complex field --&gt;
&lt;?php 
$slides = carbon_get_post_meta($page->ID, 'crb_slides', 'complex');
foreach ($slides as $slide) {
	echo $slide['image'];
}
?&gt;
</pre>
					<p>You can also use <code>carbon_get_the_post_meta($name, $type = null)</code> to access the values for the current post in <a href="http://codex.wordpress.org/The_Loop" target="_blank"><i class="icon-globe"></i> The Loop</a>.</p>
					<pre class="prettyprint">
&lt;p&gt;Article was published in: &lt;?php echo carbon_get_the_post_meta('crb_location'); ?&gt;&lt;/p&gt;

&lt;?php $slides = carbon_get_the_post_meta('crb_slides', 'complex'); ?&gt;
</pre>

					<p>After saving, the <code>carbon_after_save_custom_fields</code> hook is called, which allows you to hook additional functionality after saving. It accepts the <code>$post_id</code> parameter, which is the ID of the post being updated. Example:</p>
					<pre class="prettyprint">
add_action('carbon_after_save_custom_fields', 'crb_after_save_event');
function crb_after_save_event($post_id) {
	if ( get_post_type($post_id) !== 'crb_event' ) {
		return false;
	}

	$event_date = carbon_get_post_meta($post_id, 'crb_event_date');
	if ( $event_date ) {
		$timestamp = strtotime($event_date);
		update_post_meta($post_id, '_crb_event_timestamp', $timestamp);
	}
}
</pre>

					<hr>

					<h3 id="Theme_Options" class="left-hash"><a href="#Theme_Options">Theme Options Container</a></h3>

					<p>Theme option containers are used to add pages with options in the back-end. Field data is stored as <a href="http://codex.wordpress.org/Option_Reference" target="_blank"><i class="icon-globe"></i> options</a>. </p>
					<p>By default, theme options containers automatically create main page in the admin area menu named "Theme Options". In most cases these default settings are sufficient, but if you need to change the title or the location of a page in the menu, read the "Multiple option pages" section below.</p>

					<pre class="prettyprint">
Carbon_Container::factory('theme_options', 'Theme Options')
	-&gt;add_fields(array(
		Carbon_Field::factory('text', 'crb_facebook_url'),
		Carbon_Field::factory('textarea', 'crb_footer_text')
	));
</pre>


					<h4>Multiple option pages</h4>
					<p>It is sometimes needed to create more than one option page. At other times you need to place different pages in different sections in the admin menu. For example, you might have extensive list of settings for the background that you would want to place on a separate Theme options page under Appearance.</p>

					<p>To change the location of your Theme Options page, you use <code>set_page_parent($parent)</code>, where: </p>
					<dl>
						<dt><code>$parent</code></dt>
						<dd>
							This can be either:<br/>
							- Title of a top level Theme Options page.<br/>
							- Indentificator of a top level menu section in the admin menu sidebar. This corresponds to the <code>$parent_slug</code> parameter of <a href="http://codex.wordpress.org/Function_Reference/add_submenu_page" target="_blank"><i class="icon-globe"></i>add_submenu_page</a>. You can see all predefined page parents <a href="http://codex.wordpress.org/Function_Reference/add_submenu_page#Parameters" target="_blank"><i class="icon-globe"></i>here</a>.<br/>
						</dd>
					</dl>

					<p>Below you see sample code for creating three theme option containers:</p>
					<pre class="prettyprint">
// Default options page
Carbon_Container::factory('theme_options', 'Basic Options')
	-&gt;add_fields(array(
		Carbon_Field::factory('header_scripts', 'crb_header_script'),
		Carbon_Field::factory('footer_scripts', 'crb_footer_script'),
	));

// Add second options page under 'Basic Options'
Carbon_Container::factory('theme_options', 'Social Links')
	-&gt;set_page_parent('Basic Options')	// title of a top level Theme Options page
	-&gt;add_fields(array(
		Carbon_Field::factory('text', 'crb_facebook_link'),
		Carbon_Field::factory('text', 'crb_twitter_link')
	));

// Add third options page under "Appearance"
Carbon_Container::factory('theme_options', 'Customize Background')
	-&gt;set_page_parent('themes.php')	// identificator of the "Appearance" admin section
	-&gt;add_fields(array(
		Carbon_Field::factory('color', 'crb_background_color'),
		Carbon_Field::factory('image', 'crb_background_image')
	));
</pre>

					<p>For detailed information on managing admin pages, see <a href="http://codex.wordpress.org/Administration_Menus" target="_blank"><i class="icon-globe"></i>Administration_Menus</a>.</p>

					<p>Every theme options container requires a level of permission, which by default is set to <code>edit_themes</code> (read more about permissions: <a href="http://codex.wordpress.org/Roles_and_Capabilities" target="_blank"><i class="icon-globe"></i>Roles &amp; Capabilities</a>).<br/>You can change the permission required to view your options page using <code>set_page_permissions($permission)</code></p>

					<h4>Custom menu icon</h4>
					<p>To change the icon of your Theme Options page, you use <code>set_icon($icon)</code>, where: </p>
					<dl>
						<dt><code>$icon</code></dt>
						<dd>
							This can be one of the values, supported in the <code>$icon_url</code> parameter of the <a href="http://codex.wordpress.org/Function_Reference/add_menu_page" target="_blank"><i class="icon-globe"></i>add_menu_page</a> function.
						</dd>
					</dl>

					<p>Below you see an example for setting up the icon of the theme options page:</p>
					<pre class="prettyprint">
Carbon_Container::factory('theme_options', 'Basic Options')
	-&gt;set_icon('dashicons-carrot')
	-&gt;add_fields(array(
		Carbon_Field::factory('text', 'crb_test_field'),
	));
</pre>

						<p><span class="label label-info">NB!</span> You can specify custom icons only to parent theme options pages.</p>


					<h4>Accessing field values</h4>
					<p>To retrieve field values from a theme options container, you need to use the function <code>carbon_get_theme_option($name, $type = null)</code>, where:</p>
					<dl>
						<dt><code>$name</code></dt>
						<dd>The name of the field to be retrieved.</dd>

						<dt><code>$type</code> <small>(optional)</small></dt>
						<dd>If the field you want to retrieve is of type complex, you need to pass <code>"complex"</code>.</dd>
					</dl>

					<pre class="prettyprint">
&lt;p&gt;Copyright &lt;?php echo carbon_get_theme_option('crb_copyright'); ?&gt;&lt;/p&gt;
&lt;p&gt;
	Office locations:
	&lt;?php 
	$address_lines = carbon_get_theme_option('crb_addresses', 'complex');
	foreach ($address_lines as $line) {
		echo $line . '&lt;br/&gt;';
	}
	?&gt;
&lt;p&gt;
</pre>

					<p>After saving, the <code>carbon_after_save_theme_options</code> hook is called, which allows you to hook additional functionality after saving.</p>

					<hr>

					<h3 id="Term_Meta" class="left-hash"><a href="#Term_Meta">Term meta Container</a></h3>
					<p>Term meta containers are used to extend the term edit screens with additional fields. Field data is stored separately for each term in a custom table (<code>$wpdb-&gt;termmeta</code>). </p>

					<pre class="prettyprint">
Carbon_Container::factory('term_meta', 'Category Properties')
	-&gt;show_on_taxonomy('category')
	-&gt;add_fields(array(
		Carbon_Field::factory('color', 'crb_title_color'),
		Carbon_Field::factory('image', 'crb_thumb'),
	));</pre>

					<p>By default the term meta containers are displayed on <code>category</code> terms, but you can select specific taxonomies they show on using the method <code>show_on_taxonomy($taxonomy)</code>, where: </p>
					<dl>
						<dt><code>$taxonomy</code></dt>
						<dd>Can be either name of a single taxonomy or an array of taxonomy names</dd>
					</dl>


					<h4>Visibility options</h4>
					<p>Custom fields containers are very flexible in terms of display options. You can select specific post type they show on, as well as category, format, parent, etc. A list of all options is displayed below:</p>

					<dl>
						<dt>Level</dt>
						<dd>
							<p>To display a container on hierarchical terms from a specific level, use:</p>
							<p><code>-&gt;show_on_level($level)</code></p>
							<p>where <code>$level</code> is the level of hierarchy depth, starting from 1 and increasing when going into further hierarchy depth. </p>
						</dd>
					</dl>
								
					<h4>Accessing field values</h4>
					<p>To access field values you need to use the function <code>carbon_get_term_meta($term_id, $name, $type = null)</code>, where: </p>
					<dl>
						<dt><code>$term_id</code></dt>
						<dd>Term ID where your value was entered.</dd>

						<dt><code>$name</code></dt>
						<dd>The name of the field to be retrieved.</dd>

						<dt><code>$type</code> <small>(optional)</small></dt>
						<dd>If the field you want to retrieve is of type complex, you need to pass <code>"complex"</code>.</dd>
					</dl>

					<pre class="prettyprint">
&lt;!-- Simple field --&gt;
&lt;p&gt;Editor of this category: &lt;?php echo carbon_get_term_meta($category-&gt;term_id, 'crb_editor'); ?&gt;&lt;/p&gt;

&lt;!-- Complex field --&gt;
&lt;?php 
$authors = carbon_get_term_meta($category-&gt;term_id, 'crb_authors', 'complex');
foreach ($authors as $author) {
	echo $author['name'];
}
?&gt;
</pre>

					<p>After saving, the <code>carbon_after_save_term_meta</code> hook is called, which allows you to hook additional functionality after saving. It accepts the <code>$term_id</code> parameter, which is the term_id of the taxonomy term that was updated.</p>

					<hr>

					<h3 id="User_Meta" class="left-hash"><a href="#User_Meta">User meta Container</a></h3>
					<p>User meta containers add extra fields to the user edit screens. Field data is stored separately for each user as user meta (see <a href="http://codex.wordpress.org/Function_Reference/add_user_meta" target="_blank"><i class="icon-globe"></i> add_user_meta</a>). </p>

					<pre class="prettyprint">
Carbon_Container::factory('user_meta', 'Address')
	-&gt;add_fields(array(
		Carbon_Field::factory('text', 'crb_city_and_post', 'City and post code'),
		Carbon_Field::factory('text', 'crb_street', 'Street Name'),
	));</pre>

					<p>By default the user meta containers are displayed for all users of all roles, but you can select specific user roles they show on using the method <code>show_on_user_role($role)</code>, where: </p>
					<dl>
						<dt><code>$role</code></dt>
						<dd>Can be either name of a single role or an array of role names</dd>
					</dl>
								
					<h4>Accessing field values</h4>
					<p>To access field values you need to use the function <code>carbon_get_user_meta($user_d, $name, $type = null)</code>, where: </p>
					<dl>
						<dt><code>$user_d</code></dt>
						<dd>User ID where your value was entered.</dd>

						<dt><code>$name</code></dt>
						<dd>The name of the field to be retrieved.</dd>

						<dt><code>$type</code> <small>(optional)</small></dt>
						<dd>If the field you want to retrieve is of type complex, you need to pass <code>"complex"</code>.</dd>
					</dl>

					<pre class="prettyprint">
&lt;!-- Simple field --&gt;
&lt;?php $author = get_the_author(); ?&gt;
&lt;p&gt;Author address: &lt;?php echo carbon_get_user_meta($author-&gt;ID, 'crb_street'); ?&gt;&lt;/p&gt;

&lt;!-- Complex field --&gt;
&lt;?php 
$phone_numbers = carbon_get_user_meta($author-&gt;ID, 'crb_phone_numbers', 'complex');
foreach ($phone_numbers as $phone) {
	echo $phone['country_code'] . '-' . $phone['number'];
}
?&gt;
</pre>

					<p>After saving, the <code>carbon_after_save_user_meta</code> hook is called, which allows you to hook additional functionality after saving. It accepts the <code>$user_id</code> parameter, which is the ID of the user that was updated.</p>


						<hr>

					<h3 id="Comment_Meta" class="left-hash"><a href="#Comment_Meta">Comment meta Container</a></h3>
					<p>Comment meta containers add extra fields to the comment edit screens. Field data is stored separately for each comment as comment meta (see <a href="http://codex.wordpress.org/Function_Reference/add_comment_meta" target="_blank"><i class="icon-globe"></i> add_comment_meta</a>). </p>

					<pre class="prettyprint">
Carbon_Container::factory('comment_meta', 'Comment Information')
	-&gt;add_fields(array(
		Carbon_Field::factory('text', 'crb_comment_rating', 'Comment Rating'),
		Carbon_Field::factory('text', 'crb_comment_additional_info', 'Additional Comment Information'),
	));</pre>
					
					<h4>Accessing field values</h4>
					<p>To access field values you need to use the function <code>carbon_get_comment_meta($comment_id, $name, $type = null)</code>, where: </p>
					<dl>
						<dt><code>$comment_id</code></dt>
						<dd>Comment ID where your value was entered.</dd>

						<dt><code>$name</code></dt>
						<dd>The name of the field to be retrieved.</dd>

						<dt><code>$type</code> <small>(optional)</small></dt>
						<dd>If the field you want to retrieve is of type complex, you need to pass <code>"complex"</code>.</dd>
					</dl>

					<pre class="prettyprint">
&lt;?php $comments = get_comments(array(
	'post_id' => get_the_ID(),
));

foreach ( $comments as $comment ) {
	$comment_additional_info = carbon_get_comment_meta($comment->comment_ID, 'crb_comment_info');
	$comment_rating	= carbon_get_comment_meta($comment->comment_ID, 'crb_comment_rating');

	if ( !empty($comment_additional_info) ) {
		echo $comment->comment_ID . ' info: '. $comment_additional_info;
	}

	if ( !empty($comment_rating) ) {
		echo 'Rating: ' . $comment_rating;
	}
}
?&gt;
</pre>

					<hr>

					<h3 id="Widgets" class="left-hash"><a href="#Widgets">Widgets</a></h3>
					<p>Widget containers are used to create custom widgets for your theme. Each widget is defined as a PHP class. Widget classes must extend the <code>Carbon_Widget</code> class and must have at least two methods - constructor and <code>front_end</code> method.</p>

					<p>The constructor must be named after the class and it must call the method <code>setup($name, $description, $fields, $classname)</code>, where: </p>
					<dl>
						<dt><code>$name</code></dt>
						<dd>Name of the widget, used in the back-end</dd>
						<dt><code>$description</code></dt>
						<dd>Description of the widget, used in the back-end</dd>
						<dt><code>$fields</code></dt>
						<dd>Array of Carbon fields</dd>
						<dt><code>$classname</code></dt>
						<dd><em>optional</em> | Provide a custom class attribute for the widget.</dd>
					</dl>

					<p>The <code>front_end($args, $instance)</code> method is responsible for rendering your widget in the front-end. Here you have access to all values saved for the fields you defined in the constructor via the <code>$instance</code> parameter.</p>

					<p>After you define your class, it is important that you register your new widget during the <code>widgets_init</code> action. </p>

					<pre class="prettyprint">
class ThemeWidgetExample extends Carbon_Widget {
	// Register widget function. Must have the same name as the class
	function __construct() {
		$this-&gt;setup('Theme Widget - Example', 'Displays a block with title/text', array(
			Carbon_Field::factory('text', 'title', 'Title')-&gt;set_default_value('Hello World!'),
			Carbon_Field::factory('textarea', 'content', 'Content')-&gt;set_default_value('Lorem Ipsum dolor sit amet')
		));
	}
	
	// Called when rendering the widget in the front-end
	function front_end($args, $instance) {
		echo $args['before_title'] . $instance['title'] . $args['after_title'];
		echo '&lt;p&gt;' . $instance['content'] . '&lt;/p&gt;';
	}
}

function load_widgets() {
	register_widget('ThemeWidgetExample');
}
add_action('widgets_init', 'load_widgets');</pre>
	
					<p>You can setup control options (like width) of your widget by adding a <code>$form_options</code> definition at beginning of your custom widget class. Example:</p>
					<pre class="prettyprint">
protected $form_options = array(
	'width' => 500
);
</pre>

					<p>In case you want to disable the default widget wrappers that come from your sidebar, you can disable <code>$this->print_wrappers</code> in the <code>__construct()</code> method of your widget. Example:</p>
					<pre class="prettyprint">
function __construct() {
	$this->setup('Widget Title', __('Widget Description', 'crb'), array(
		Carbon_Field::factory('text', 'title', 'Title')-&gt;set_default_value('Hello World!'),
	));

	$this->print_wrappers = false;
}
</pre>

					<hr>

					<h3 id="Nav_Menu" class="left-hash"><a href="#Nav_Menu">Nav Menu</a></h3>
					<p>Nav Menu containers are used to extend the Nav Menu edit screens with additional fields. Field data is stored separately for each post as post meta.</p>

					<pre class="prettyprint">
Carbon_Container::factory('nav_menu', 'Menu Settings')
	-&gt;add_fields(array(
		Carbon_Field::factory('color', 'crb_color'),
	));</pre>


					<h4>Visibility options</h4>
					<p>Custom Nav Menu containers does not support any visibility options. All containers are visible in all menu items.</p>

					<h4>Container position</h4>
					<p>Containers are rendered in the order they are initialized.</p>
								
					<h4>Accessing field values</h4>
					<p>Since each menu entry is a post from post type "nav_menu_item" with status "published", the values can be accessed with the function <code>carbon_get_post_meta($nav_menu_item_ID, $name)</code>, where: </p>

					<dl>
						<dt><code>$nav_menu_item_ID</code></dt>
						<dd>Nav Menu Item Post ID where your value was entered. </dd>

						<dt><code>$name</code></dt>
						<dd>The name of the field to be retrieved.</dd>

						<dt><code>$type</code> <small>(optional)</small></dt>
						<dd>Complex fields are not yet supported.</dd>
					</dl>

					<h4>Custom Walkers or Walker Filters</h4>
					<p>In order to use the values setup from Nav Menus, you need to use a custom Menu Walker or a filter from the default walker located in <code>wp-includes/nav-menu-template.php</code>.</p>
					<p>Here is a Walker example:</p>
					<pre class="prettyprint">
/**
 * Location:
 * 	wp-includes/nav-menu-template.php
 * 	source: Walker_Nav_Menu
 */
class Crb_Main_Menu_Walker extends Walker_Nav_Menu {
	public function start_el( &$output, $item, $depth = 0, $args = array(), $id = 0 ) {
		$indent = ( $depth ) ? str_repeat( "\t", $depth ) : '';

		$classes = empty( $item->classes ) ? array() : (array) $item->classes;
		$classes[] = 'menu-item-' . $item->ID;

		$class_names = join( ' ', apply_filters( 'nav_menu_css_class', array_filter( $classes ), $item, $args, $depth ) );
		$class_names = $class_names ? ' class="' . esc_attr( $class_names ) . '"' : '';

		$id = apply_filters( 'nav_menu_item_id', 'menu-item-'. $item->ID, $item, $args, $depth );
		$id = $id ? ' id="' . esc_attr( $id ) . '"' : '';

		$output .= $indent . '<li' . $id . $class_names .'>';

		$atts = array();
		$atts['title']  = ! empty( $item->attr_title ) ? $item->attr_title : '';
		$atts['target'] = ! empty( $item->target )     ? $item->target     : '';
		$atts['rel']    = ! empty( $item->xfn )        ? $item->xfn        : '';
		$atts['href']   = ! empty( $item->url )        ? $item->url        : '';


		// Adding a custom color to the links
		$crb_color = carbon_get_post_meta($item->ID, 'crb_color');
		$atts['style'] = ! empty( $crb_color ) ? 'color: ' . $crb_color . '; ' : '';
		// --- END --- "Adding a custom color to the links"

		$atts = apply_filters( 'nav_menu_link_attributes', $atts, $item, $args, $depth );

		$attributes = '';
		foreach ( $atts as $attr => $value ) {
			if ( ! empty( $value ) ) {
				$value = ( 'href' === $attr ) ? esc_url( $value ) : esc_attr( $value );
				$attributes .= ' ' . $attr . '="' . $value . '"';
			}
		}

		$item_output = $args->before;
		$item_output .= '<a'. $attributes .'>';

		$item_output .= $args->link_before . apply_filters( 'the_title', $item->title, $item->ID ) . $args->link_after;
		$item_output .= '</a>';
		$item_output .= $args->after;

		$output .= apply_filters( 'walker_nav_menu_start_el', $item_output, $item, $depth, $args );
	}

} // Walker_Nav_Menu
</pre>
					<p>Here is a Filter example, doing the same thing:</p>
					<pre class="prettyprint">
// Adding a custom color to the links
add_filter('nav_menu_link_attributes', 'crb_nav_menu_link_attributes', 10, 4);
function crb_nav_menu_link_attributes($atts, $item, $args, $depth) {
	$crb_color = carbon_get_post_meta($item->ID, 'crb_color');
	$atts['style'] = ! empty( $crb_color ) ? 'color: ' . $crb_color . '; ' : '';

	return $atts;
}
</pre>
					<p>Both examples will result in:</p>
					<pre class="prettyprint">
&lt;div class="menu-main-menu-container"&gt;
	&lt;ul id="menu-main-menu" class="menu"&gt;
		&lt;li id="menu-item-23" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-23"&gt;
			&lt;a href="#" style="color: #2020f3; "&gt;Sample Page&lt;/a&gt;
		&lt;/li&gt;
		&lt;li id="menu-item-24" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-24"&gt;
			&lt;a href="#" style="color: #f94c4c; "&gt;Sample Page&lt;/a&gt;
		&lt;/li&gt;
		&lt;li id="menu-item-26" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-26"&gt;
			&lt;a href="#" style="color: #81d742; "&gt;Sample Page&lt;/a&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
&lt;/div&gt;
</pre>

			
					<hr>

					<h3 id="Tabs" class="left-hash"><a href="#Tabs">Tabs</a></h3>
					<p>The tabs allow you to group multiple fields under different tab panels using the Container method <code>add_tab</code>. Tabs can be used on every container type. Example:</p>
					<pre class="prettyprint">
Carbon_Container::factory('custom_fields', __('User Settings', 'crb'))
	->add_tab(__('Profile', 'crb'), array(
		Carbon_Field::factory('text', '_crb_first_name', 'First Name'),
		Carbon_Field::factory('text', '_crb_last_name', 'Last Name'),
		Carbon_Field::factory('text', '_crb_position', 'Position'),
	))
	->add_tab(__('Notification', 'crb'), array(
		Carbon_Field::factory('text', '_crb_email', 'Notification Email'),
		Carbon_Field::factory('text', '_crb_phone', 'Phone Number'),
	));
</pre>

					<hr>

					<h2 id="Fields" class="left-hash"><a href="#Fields">Fields</a></h2>
					<p>Fields are the building block of every container.</p>

					<p>New field are created using the factory method <code>Carbon_Field::factory($type, $name, $label=null)</code>, where:</p>
					<dl>
						<dt><code>$type</code></dt>
						<dd>The type of the field. This parameter should be valid class name of a field. For example <code>text</code> will create field of class <code>Carbon_Field_Text</code>. For a complete list of field types, see <a href="#Types"><i class="icon-hand-right"></i> Types</a>.</dd>

						<dt><code>$name</code></dt>
						<dd>Name of the field. Used as a key when stored in the database and for you to retrieve it's value. Please note, that all fields in a Custom Field Container have their names automatically prefixed with an underscored (e.g. <code>bgcolor</code> becomes <code>_bgcolor</code>). For more information why, see <a href="http://codex.wordpress.org/Function_Reference/add_post_meta#Making_a_.22Hidden.22_Custom_Field" target="_blank"><i class="icon-globe"></i> here</a></dd>
						
						<dt><code>$label</code> <small>(optional)</small></dt>
						<dd>
							<p>The label of the field is displayed in the back-end only, where the container is visible. When the parameter is omitted it is automatically derived from the <code>$name</code></p>
							<p>If this parameter is omitted, and the <code>$name</code> starts with <code>crb_</code>, the "Crb " part will not be displayed in the generated label.</p>
						</dd>
					</dl>

					<p>The factory greatly simplifies the field creation process, since it returns the field object itself and you don't need to assign it to a variable. The fields API supports <a href="http://en.wikipedia.org/wiki/Method_chaining" target="_blank"><i class="icon-globe"></i> method chaining</a> (as seen in the example below).</p>

					<pre class="prettyprint">
// Create image field with name "customer_photo" and label "Photo"
Carbon_Field::factory('image', 'crb_customer_photo', 'Photo');

// Here the title is automatically set to "Custom Sidebar"
Carbon_Field::factory('choose_sidebar', 'crb_custom_sidebar');

// Method chaining
Carbon_Field::factory('select', 'crb_color')-&gt;add_options(array('red', 'blue', 'green'))-&gt;help_text('Pick a color');
</pre>


					<p>All field types originate from a single class named <code>Carbon_Field</code> and inherit the following basic features:</p>
					<h5>Default Values</h5>
					<p>You can assign a default value for each field in every container. The default value is used when there is currently no value for the particular field in the database. This is the case for example, when you add a new post, or you add a new theme options field to existing container.</p>
					<p>To assign a default value, you use:</p>
					<p><code>Carbon_Field::factory(...)-&gt;<strong>set_default_value($default_value)</strong></code></p>
					
					<h5>Required Fields</h5>
					<p>You can mark any field as required, in which case the user will need to fill it out before submitting. To set a field as required, you use: </p>
					<p><code>Carbon_Field::factory(...)-&gt;<strong>set_required(true)</strong></code></p>
					
					<h5>Help Text</h5>
					<p>Help text is used as a hint to the user, who will use the field. It is usually rendered under the field and contains more information about what it should contain - requirements, examples, links, etc. HTML tags are allowed.</p>
					<p>You add help text using:</p>
					<p><code>Carbon_Field::factory(...)-&gt;<strong>help_text($text)</strong></code></p>

					<h5>Width</h5>
					<p>You can set the width to fields that are next to each other and they will align on one row. To set the field width %, use:</p>
					<p><code>Carbon_Field::factory(...)-&gt;<strong>set_width(50)</strong></code></p>
					<p>This feature does nothing in term meta container due to the table layout used by WordPress term editing screen. </p>

					<h5>Classes</h5>
					<p>Custom field classes can be added using the <code>add_class</code> method, for example:</p>
					<p>
						<code>Carbon_Field::factory(...)-&gt;<strong>add_class('my-custom-class')</strong></code><br>
					</p>

					<h5>Conditional Logic</h5>
					<p>
						You can apply conditional logic to a field, using <code>set_conditional_logic($rules)</code>, to show or hide it based on other field(s) in the same container. The syntax is similar to <code>meta_query</code>.
					</p>

					<p>The conditional rules are passed in a two-dimensional array and each rule can have the following arguments as key=&gt;value pairs:</p>

					<table class="table">
						<thead>
							<tr>
								<th>Key</th>
								<th>Description</th>
								<th>Value</th>
								<th>Required</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td><code>field</code></td>
								<td>The field name to which the rule is applied. The name should be the same as defined in the container.</td>
								<td>(string)</td>
								<td>Yes</td>
							</tr>
							<tr>
								<td><code>value</code></td>
								<td>The value of the field. It can be an array only when compare is <code>IN</code> or <code>NOT IN</code>.</td>
								<td>(string|array), defaults to ''</td>
								<td>No</td>
							</tr>
							<tr>
								<td><code>compare</code></td>
								<td>Operator to test. Possible values are: <code>=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code>, <code>IN</code>, <code>NOT IN</code>.</td>
								<td>(string), defaults to <code>=</code></td>
								<td>No</td>
							</tr>
						</tbody>
					</table>

					<p>You can optionally pass the <code>relation</code> key and set it to either <code>AND</code> (default) or <code>OR</code>. It defines the relation, when there is more than one rule.</p>

					<p>Example:</p>
					<pre class="prettyprint">
Carbon_Field::factory('select', 'crb_show_socials', 'Show Socials')
	->add_options(array(
		'yes' => 'Yes',
		'no' => 'No',
	)),

Carbon_Field::factory('text', 'crb_facebook', 'Facebook URL')
	->set_conditional_logic(array(
		'relation' => 'AND', // Optional, defaults to "AND"
		array(
			'field' => 'crb_show_socials',
			'value' => 'yes', // Optional, defaults to "". Should be an array if "IN" or "NOT IN" operators are used.
			'compare' => '=', // Optional, defaults to "=". Available operators: =, &lt;, &gt;, &lt;=, &gt;=, IN, NOT IN
		)
	)),
</pre>

					<hr>

					<div class="field-docs">
						<h3 id="Field_Text" class="left-hash"><a href="#Field_Text">Text Field <code>text</code></a></h3>
						<p>The text field is the simplest and most generic field. It renders a text input field.</p>
						<pre class="prettyprint">Carbon_Field::factory('text', 'crb_subtitle')</pre>
					</div>

					<div class="field-docs">
						<h3 id="Field_Textarea" class="left-hash"><a href="#Field_Textarea">Textarea <code>textarea</code></a></h3>
						<p>Multiline text input with HTML allowed</p>
						<pre class="prettyprint">Carbon_Field::factory('textarea', 'crb_meta_description')</pre>
						<strong>Setup methods</strong>
						<dl>
							<dt><code>set_rows($rows = 0)</code></dt>
							<dd>
								Sets the number of rows. Must be greater than or equal to 0. Default is <code>0</code>, which falls back to <code>->set_height(170)</code>
								<pre class="prettyprint">Carbon_Field::factory("textarea", "crb_services_offered", "Services Offered")-&gt;set_rows(4);</pre>
							</dd>
							<dt><code>set_height($height = 170)</code> <em>(DEPRECATED)</em></dt>
							<dd>
								Sets the field height. <strong>Deprecated</strong> in favor of <code>set_rows()</code>
								<pre class="prettyprint">Carbon_Field::factory("textarea", "crb_related_urls", "Related Links")-&gt;set_height(250);</pre>
							</dd>
						</dl>
						<p><span class="label label-info">NB!</span> The <code>set_height()</code> method is now <strong>deprecated</strong> - <code>set_rows()</code> should be used instead due to differences in the visual appearance of the textarea between desktop and mobile devices.</p>
					</div>
					
					<div class="field-docs">
						<h3 id="Field_RichText" class="left-hash"><a href="#Field_RichText">Rich text area <code>rich_text</code></a></h3>
						<p>This field renders the built-in WordPress tinyMCE editor.</p>
						<pre class="prettyprint">
Carbon_Field::factory("rich_text", "crb_sidenote", "Sidenote Content");</pre>

					</div>
					<div class="field-docs">
						<h3 id="Field_Date" class="left-hash"><a href="#Field_Date">Date <code>date</code></a></h3>
						<p>Renders a date picker using jQuery UI. The value is stored in <code>YYYY-MM-DD</code> format.</p>
						<pre class="prettyprint">
Carbon_Field::factory("date", "crb_event_start_date", "Start");</pre>
						<h5>Setup methods</h5>
						<dl>
							<dt><code>set_options($options)</code></dt>
							<dd>Set an array with the <a href="http://api.jqueryui.com/datepicker/" target="_blank"><i class="icon-globe"></i>Datepicker options</a>.</dd>
						</dl>
					</div>

					<div class="field-docs">
						<h3 id="Field_Color" class="left-hash"><a href="#Field_Color">Color <code>color</code></a></h3>
						<p>Renders color picker using Farbtastic. Colors are represented with six hexadecimal digits prefixed with <code>#</code> (e.g. white is <code>#FFFFFF</code>)</p>
						<pre class="prettyprint">
Carbon_Field::factory("color", "crb_box_background", "Background Color");
</pre>
					</div>
					<div class="field-docs">
						<h3 id="Field_Checkbox" class="left-hash"><a href="#Field_Checkbox">Checkbox <code>checkbox</code></a></h3>
						<p>The checkbox field create a single tick-able option with a label next to it.</p>
						<h5>Setup methods</h5>
						<dl>
							<dt><code>set_option_value($value)</code></dt>
							<dd>Set the value that will be saved when the option is ticked.<br/><span class="label label-info">NB!</span> When unticked, the value is not saved in the database.</dd>
						</dl>
						<pre class="prettyprint">
Carbon_Field::factory("checkbox", "crb_show_content", "Show content")
	->set_option_value('yes');</pre>
					</div>

					<div class="field-docs">
						<h3 id="Field_Select" class="left-hash"><a href="#Field_Select">Select <code>select</code></a></h3>
						<p>Creates a select box with pre-defined options. </p>
						<h5>Setup methods</h5>
						<dl>
							<dt><code>add_options($options)</code></dt>
							<dd><p>Add an associative array with options or a <a href="http://php.net/manual/en/language.types.callable.php" target="_blank"><i class="icon-globe"></i> callback</a>. <br/>The method can be called multiple times, in which case the options between the calls will be appended (instead of overwritten).</p></dd>
							<dt><code>set_options($options)</code></dt>
							<dd><p>Set options as an associative array  or a <a href="http://php.net/manual/en/language.types.callable.php" target="_blank"><i class="icon-globe"></i> callback</a>. <br/>The method is not indented to be called multiple times - each call will overwrite the previous options.</p></dd>
						</dl>
						<p><span class="label label-info">NB!</span> If you provide indexed array with no key values, the <strong>default indexes (0, 1, 2 ...)</strong> of the elements will be used.</p>
						<pre class="prettyprint">
Carbon_Field::factory("select", "crb_content_align", "Text alignment")-&gt;add_options(array(
	'left' =&gt; 'Left',
	'center' =&gt; 'Center',
	'right' =&gt; 'Right',
));
</pre>
					</div>
					<div class="field-docs">
						<h3 id="Field_Radio" class="left-hash"><a href="#Field_Radio">Radio <code>radio</code></a></h3>
						<p>Similar to the Select field, but instead of in a select box, options are rendered as a set of radio buttons.</p>
						<h5>Setup methods</h5>
						<dl>
							<dt><code>add_options($options)</code></dt>
							<dd>Add an associative array with options or a <a href="http://php.net/manual/en/language.types.callable.php" target="_blank"><i class="icon-globe"></i> callback</a>. <br/>The method can be called multiple times, in which case the options between the calls will be appended (instead of overwritten).</dd>
							<dt><code>set_options($options)</code></dt>
							<dd><p>Set options as an associative array or a <a href="http://php.net/manual/en/language.types.callable.php" target="_blank"><i class="icon-globe"></i> callback</a>. <br/>The method is not indented to be called multiple times - each call will overwrite the previous options.</p></dd>
						</dl>
						<p><span class="label label-info">NB!</span> If you provide indexed array with no key values, the <strong>default indexes (0, 1, 2 ...)</strong> of the elements will be used.</p>
						<pre class="prettyprint">
Carbon_Field::factory("radio", "crb_subtitle_styling", "Subtitle text style")-&gt;add_options(array(
	'em' =&gt; 'Italic',
	'strong' =&gt; 'Bold',
	'del' =&gt; 'Strike',
));
</pre>
					</div>

					<div class="field-docs">
						<h3 id="Field_Set" class="left-hash"><a href="#Field_Set">Set <code>set</code></a></h3>
						<p>The set field creates a list of tick-able options. This field enables to select multiple options. The value is retrieved as array containing the ticked options.</p>
						<h5>Setup methods</h5>
						<dl>
							<dt><code>add_options($options)</code></dt>
							<dd>Add an associative array with options or a <a href="http://php.net/manual/en/language.types.callable.php" target="_blank"><i class="icon-globe"></i> callback</a>. <br/>The method can be called multiple times, in which case the options between the calls will be appended (instead of overwritten).</dd>
							<dt><code>set_options($options)</code></dt>
							<dd><p>Set options as an associative array or a <a href="http://php.net/manual/en/language.types.callable.php" target="_blank"><i class="icon-globe"></i> callback</a>. <br/>The method is not indented to be called multiple times - each call will overwrite the previous options.</p></dd>
							<dt><code>limit_options($count)</code></dt>
							<dd><p>Shows only the first <code>$count</code> options, while the others are hidden and can be shown by clicking the <em>"Show All Options"</em> link. <br/>This method is useful when there are many options in the Set field. <br />Must be greater than or equal to 0. Default is <code>0</code> (no limit, all options are visible).</p></dd>
						</dl>
						<p><span class="label label-info">NB!</span> If you provide indexed array with no key values, the <strong>default indexes (0, 1, 2 ...)</strong> of the elements will be used.</p>
						<pre class="prettyprint">
Carbon_Field::factory("set", "crb_product_features", "Features")-&gt;add_options(array(
	'bluetooth' =&gt; 'Bluetooth',
	'gps' =&gt; 'GPS navigation',
	'nfc' =&gt; 'Near field communication',
));
</pre>
					</div>

					<div class="field-docs">
						<h3 id="Field_Relationship" class="left-hash"><a href="#Field_Relationship">Relationship <code>relationship</code></a></h3>
						<p>This field allows to select and reorder posts of any post type. Useful for creating links between any of the post type entries.</p>
						<h5>Setup methods</h5>
						<dl>
							<dt><code>set_post_type($type)</code></dt>
							<dd>It allows you to specify the post type types you want to have available in this relationship field. Defaults to <code>post</code></dd>
							<dt><code>set_max($max)</code></dt>
							<dd>Allows you to limit the maximum number of selected items in a relationship field. By default, there is no limit.
								<pre class="prettyprint">
Carbon_Field::factory('relationship', 'crb_relationship')
	->set_max(5);</pre>
							<dt><code>allow_duplicates($allow)</code></dt>
							<dd>If enabled will allow the same item to be selected more than once. By default, duplicates are not allowed.
								<pre class="prettyprint">
Carbon_Field::factory('relationship', 'crb_relationship')
	->allow_duplicates(true);</pre>
							</dd>
						</dl>
						<h5>Example</h5>
						<p>The example below registers a relationship field with all posts from the <code>post</code> post type:</p>
						<pre class="prettyprint">
Carbon_Field::factory('relationship', 'crb_relationship')
	->set_post_type('post');</pre>
					</div>

					<div class="field-docs">
						<h3 id="Field_Association" class="left-hash"><a href="#Field_Association">Association <code>association</code></a></h3>
						<p>This field allows to select and reorder multiple post type posts, taxonomy terms, users or comments. Useful for creating links between any of these items.</p>
						<h5>Setup methods</h5>
						<dl>
							<dt><code>set_types($types)</code></dt>
							<dd>It allows you to specify the types of data that you want to have available in this association field. 
								<br />In this context:
								<ul>
									<li><code>type</code> is the data type - <code>post</code>, <code>term</code>, <code>user</code>, <code>comment</code>, or a custom value (if implemented).</li>
									<li><code>subtype</code> clarifies the exact type to be used. <br />For the <code>post_type</code> type, you can use <code>post</code>, <code>page</code> or any other registered custom post type. <br />For the <code>taxonomy</code> type, you can use <code>category</code>, <code>post_tag</code> or any other registered custom taxonomy. <br />The <code>subtype</code> is not used for the <code>user</code> and <code>comments</code> types.</li>
								</ul>
								Defaults to <code>array('type' => 'post', 'post_type' => 'post')</code>
							</dd>
							<dt><code>set_max($max)</code></dt>
							<dd>Allows you to limit the maximum number of selected items in a association field. By default, there is no limit.
								<pre class="prettyprint">
Carbon_Field::factory('association', 'crb_association')
	->set_max(5);</pre>
							<dt><code>allow_duplicates($allow)</code></dt>
							<dd>If enabled will allow the same item to be selected more than once. By default, duplicates are not allowed.
								<pre class="prettyprint">
Carbon_Field::factory('association', 'crb_association')
	->allow_duplicates(true);</pre>
							</dd>
						</dl>
						<p><span class="label label-info">NB!</span> To get all the association data (each entry containing id, type, subtype) array, you can set the <code>association</code> type in the retrieval functions. Example:</p>
						<pre class="prettyprint">
/* Get the association data as an array */
carbon_get_post_meta($id, $name, 'association'); // array( 0 => array('id' => 20, 'type' => 'post', 'post_type' => 'page'), 1 => array('id' => 16, 'type' => 'term', 'taxonomy' => 'category')

/* Get the association data as plain array with IDs */
carbon_get_post_meta($id, $name); // array( 0 => 20, 1 => 16 )

</pre>

						<h5>Example</h5>
						<p>The example below registers the following options for the association field:</p>
								<ul>
									<li>Post Type: Page</li>
									<li>Post Type: Post</li>
									<li>Taxonomy: Category</li>
									<li>Taxonomy: Post Tag</li>
									<li>Users</li>
									<li>Comments</li>
								</ul>
						<pre class="prettyprint">
Carbon_Field::factory('association', 'crb_association')
	->set_types(array(
		array(
			'type' => 'post',
			'post_type' => 'page',
		),
		array(
			'type' => 'post',
			'post_type' => 'post',
		),
		array(
			'type' => 'term',
			'taxonomy' => 'category',
		),
		array(
			'type' => 'term',
			'taxonomy' => 'post_tag',
		),
		array(
			'type' => 'user',
		),
		array(
			'type' => 'comment',
		),
	));</pre>
					</div>

					<div class="field-docs">
						<h3 id="Field_File" class="left-hash"><a href="#Field_File">File <code>file</code></a></h3>
						<p>Renders a text input with URL and file upload button. The built-in WordPress file handling interface is used.</p>
						<h5>Setup methods</h5>
						<dl>
							<dt><code>set_type($mime_type)</code></dt>
							<dd>Set the allowed files type. Short mime types are also supported (audio, video, image).</dd>
						</dl>
						<pre class="prettyprint">
Carbon_Field::factory("file", "crb_price_list", "Price list (PDF)");
</pre>
					</div>

					<div class="field-docs">
						<h3 id="Field_Image" class="left-hash"><a href="#Field_Image">Image <code>image</code></a></h3>
						<p>Renders a text input with URL and image upload button. The built-in WordPress file handling interface is used.</p>
						<p>Supported image formats are: jpg, jpeg, gif, png and bmp</p>
						<h5>Setup methods</h5>
						<dl>
							<dt><code>set_type($mime_type)</code> <small>defaults to 'image'</small></dt>
							<dd>Set the allowed files type. Short mime types are also supported (audio, video, image).</dd>
						</dl>
						<pre class="prettyprint">
Carbon_Field::factory("image", "crb_employee_photo", "Photo");
</pre>
					</div>

					<div class="field-docs">
						<h3 id="Field_Attachment" class="left-hash"><a href="#Field_Attachment">Attachment <code>attachment</code></a></h3>
						<p>Renders a button to choose file (attachment) from the Media library. Instead of the URL, the field saves the attachment's ID. This allows you to retrieve additional information such as titles, descriptions, captions and different thumbnail sizes.</p>
						<h5>Setup methods</h5>
						<dl>
							<dt><code>set_type($mime_type)</code></dt>
							<dd>Set the allowed files type. Short mime types are also supported (audio, video, image).</dd>
						</dl>
						<pre class="prettyprint">
Carbon_Field::factory("attachment", "crb_related_file", "Related File");
</pre>
					</div>

					<div class="field-docs">
						<h3 id="Field_Map" class="left-hash"><a href="#Field_Map">Map <code>map</code></a></h3>
						<p>Creates a Google-powered map with an address search field.</p>
						<p>The location data is saved in multiple meta entries:</p>

						<table class="table">
							<thead>
								<tr>
									<th>Meta Key</th>
									<th>Description</th>
									<th>Value Type</th>
									<th>Value</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td><code>$field_name</code></td>
									<td>Latitude &amp; Longitude</td>
									<td>(string)</td>
									<td>40.74866,-73.97982</td>
								</tr>
								<tr>
									<td><code>$field_name . '-lat'</code></td>
									<td>Latitude</td>
									<td>(float)</td>
									<td>40.74866</td>
								</tr>
								<tr>
									<td><code>$field_name . '-lng'</code></td>
									<td>Longitude</td>
									<td>(float)</td>
									<td>-73.97982</td>
								</tr>
								<tr>
									<td><code>$field_name . '-address'</code></td>
									<td>Address</td>
									<td>(string)</td>
									<td>45 Park Avenue,  New York, NY 10016</td>
								</tr>
								<tr>
									<td><code>$field_name . '-zoom'</code></td>
									<td>Zoom level</td>
									<td>(int)</td>
									<td>8</td>
								</tr>
							</tbody>
						</table>

						<h5>Setup methods</h5>
						<dl>
							<dt><code>set_position($lat, $lng, $zoom)</code></dt>
							<dd>Set the default position on the map specified by <code>$lat</code> and <code>$lng</code> and the default zoom level to <code>$zoom</code> (zoom <code>0</code> corresponds to a map of the Earth fully zoomed out).</dd>
						</dl>
						<pre class="prettyprint">
Carbon_Field::factory("map", "crb_company_location", "Location")
	->help_text('drag and drop the pin on the map to select location');</pre>

						<h5>Usage</h5>
						<p><span class="label label-info">NB!</span> To get all the location data as an array, you can set the <code>map</code> type in the retrieval functions. Example:</p>
						<pre class="prettyprint">
/* Get the location data as an array */
carbon_get_post_meta($id, $name, 'map'); // array('lat' => 40.74866, 'lng' => -73.97982, 'address' => '45 Park Avenue,  New York, NY 10016', 'zoom' => 8)

/* Get the location latitude and longitude */
carbon_get_post_meta($id, $name); // '40.74866,-73.97982'

</pre>
					</div>
					<div class="field-docs">
						<h3 id="Field_Separator" class="left-hash"><a href="#Field_Separator">Separator <code>separator</code></a></h3>
							<p>Creates visual separator between adjacent fields. Has aesthetic function only, no data is saved.</p>
						<pre class="prettyprint">
Carbon_Field::factory("separator", "crb_style_options", "Style");</pre>
					</div>

					<div class="field-docs">
						<h3 id="Field_Sidebar" class="left-hash"><a href="#Field_Sidebar">Sidebar <code>sidebar</code></a></h3>
						<p>Adds a drop-down field that lists existing sidebars and provides the ability to add new sidebars to the site. Sidebars registered through this field can be removed from the Widgets panel using the "x" icon that will appear next to the sidebar name.</p>
						<h5>Setup methods</h5>
						<dl>
							<dt><code>disable_add_new()</code></dt>
							<dd>Remove the ability to add new sidebars to the site.</dd>
							<dt><code>exclude_sidebars($sidebars)</code></dt>
							<dd>Add the ability to exclude one or more sidebars from the select menu. <code>$sidebars</code> parameter can be an array ( of sidebar IDs or sidebar names) or a single sidebar ( ID or name ).</dd>
						</dl>
						<h5>Helper functions</h5>
						<dl>
							<dt><code>crb_dynamic_sidebar($id, $sidebar_options)</code></dt>
							<dd>This function overwrites the sidebar options and prints the sidebar with the specified id.</dd>
						</dl>
					</div>

					<div class="field-docs">
						<h3 id="Field_Choose_Sidebar" class="left-hash"><a href="#Field_Choose_Sidebar">Choose Sidebar <code>choose_sidebar</code></a></h3>
						<p><strong><em>Deprecated</em></strong> in favor of the Sidebar field.</p>
						<p>Adds a drop-down field that lists existing sidebars and provides the ability to add new sidebars to the site.</p>
						<h5>Setup methods</h5>
						<dl>
							<dt><code>disable_add_new()</code></dt>
							<dd>Remove the ability to add new sidebars to the site.</dd>

							<dt><code>set_sidebar_options($sidebar_options)</code></dt>
							<dd>
								<p>Set the options used for sidebars created by this field. See <a href="http://codex.wordpress.org/Function_Reference/register_sidebar" target="_blank"><i class="icon-globe"></i> register_sidebar</a> for more information ().</p>
								<p>This method can accept an associative array of options, or an array of associative arrays with options for each sidebar.</p>
								<p> The default options are:</p>
								<pre class="prettyprint">
array(
	'before_widget' =&gt; '&lt;li id="%1$s" class="widget %2$s"&gt;',
	'after_widget' =&gt; '&lt;/li&gt;',
	'before_title' =&gt; '&lt;h2 class="widgettitle"&gt;',
	'after_title' =&gt; '&lt;/h2&gt;',
)
</pre>
							 </dd>
						</dl>
						<p>The example below shows how to create a Choose Sidebar field with custom sidebar options and help text:</p>
						<pre class="prettyprint">
Carbon_Field::factory("choose_sidebar", "crb_custom_sidebar", __('Sidebar', 'crb'))
	->help_text('Select which sidebar to show in this page, or click "Add New" to create a new one')
	->set_sidebar_options(array(
		'before_widget' =&gt; '&lt;div id="%1$s" class="widget %2$s"&gt;',
		'after_widget' =&gt; '&lt;/div&gt;',
		'before_title' =&gt; '&lt;h3 class="widgettitle"&gt;',
		'after_title' =&gt; '&lt;div class="cl"&gt;&amp;nbsp;&lt;/div&gt;&lt;/h3&gt;',
	));
</pre>
						<p>The following example sets different sidebar options for each of the specified sidebars:</p>
						<pre class="prettyprint">
Carbon_Field::factory( 'choose_sidebar', 'crb_custom_sidebar', __('Sidebar', 'crb') )
	->set_sidebar_options(array(
		'default' => array(
			'before_widget' =&gt; '&lt;li id="%1$s" class="widget %2$s"&gt;',
			'after_widget'  =&gt; '&lt;/li&gt;',
			'before_title'  =&gt; '&lt;h2 class="widget-title"&gt;',
			'after_title'   =&gt; '&lt;/h2&gt;',
		),
		'blog-sidebar' =&gt; array(
			'before_widget' =&gt; '&lt;div id="%1$s" class="widget %2$s"&gt;',
			'after_widget'  =&gt; '&lt;/div&gt;',
			'before_title'  =&gt; '&lt;h4 class="blog-widget-title"&gt;',
			'after_title'   =&gt; '&lt;/h4&gt;',
		)
	)),
						</pre>
					</div>
					
					<div class="field-docs">
						<h3 id="Field_HeaderScripts" class="left-hash"><a href="#Field_HeaderScripts">Header Scripts <code>header_scripts</code></a></h3>
							<p>Applicable to Theme Options container only. Displays a text area, the contents of which will be automatically printed in the <code>&lt;head&gt;</code> of each page. Useful for printing user-defined javascript, as well as styles, meta tags, etc.</p>
						<pre class="prettyprint">
Carbon_Field::factory("header_scripts", "crb_header_script");
</pre>
					</div>
					<div class="field-docs">
						<h3 id="Field_FooterScripts" class="left-hash"><a href="#Field_FooterScripts">Footer Scripts <code>footer_scripts</code></a></h3>
							<p>Applicable to Theme Options container only. Displays a text area, the contents of which will be automatically printed before the closing <code>&lt;/body&gt;</code> of each page (during <code>wp_footer()</code>). Useful for printing Google Analytics code, or user-defined javascript.</p>
						<pre class="prettyprint">
Carbon_Field::factory("footer_scripts", "crb_footer_script");
</pre>
					</div>

					<div class="field-docs">
						<h3 id="Field_HTML" class="left-hash"><a href="#Field_HTML">HTML <code>html</code></a></h3>
						<p>Render custom HTML markup</p>
						<h5>Setup methods</h5>
						<dl>
							<dt><code>set_html($html)</code></dt>
							<dd>Set the HTML markup you would like to show to <code>$html</code>.</dd>
						</dl>
						<pre class="prettyprint">
Carbon_Field::factory("html", "crb_information_text")
	-&gt;set_html('&lt;h2&gt;Lorem ipsum&lt;/h2&gt;&lt;p&gt;Quisque mattis ligula eget placerat volutpat. Praesent tincidunt ultricies tempor.&lt;/p&gt;');
</pre>
					</div>

					<div class="field-docs">
						<h3 id="Field_GravityForm" class="left-hash"><a href="#Field_GravityForm">Gravity Form <code>gravity_form</code></a></h3>
							<p>Similar to select field, but automatically populated with all available gravity forms. If the plugin is not installed or not activated, an appropriate message will be displayed to the user.</p>
						<pre class="prettyprint">
Carbon_Field::factory("gravity_form", "crb_gravity_form", "Select a Form");
</pre>
						<p>There is a <code>crb_gravity_form_options</code> filter which you can use to override the options that are passed to the select field. Example:</p>
						<pre class="prettyprint">
add_filter('crb_gravity_form_options', 'crb_my_gravity_form_options');
function crb_my_gravity_form_options($options) {
	//change the default "No Form" text
	$options[0] = 'Do not show any form';

	return $options;
}
</pre>
					</div>

					<div class="field-docs">
						<h2 id="Complex_Field" class="left-hash"><a href="#Complex_Field">Complex Field</a></h2>
						<p>Complex fields act as containers to which you can add multiple groups of fields. It is represented as a table, where each row is a field group. The user is able to add infinite rows of each group. This allows to repeat a set of fields multiple times creating customizable and sortable lists. This is useful when creating image galleries, lists of data or advanced content and layout elements.</p>

						<pre class="prettyprint">
Carbon_Field::factory('complex', 'crb_slide')-&gt;add_fields(array(
	Carbon_Field::factory('text', 'title'),
	Carbon_Field::factory('image', 'photo'),
)),
</pre>
						

						<p>The example above shows how to make a slide show. We crated a single complex field named <code>slide</code>, to which we attached one group of fields that represents a single slide - <code>title</code> and <code>photo</code>. The user will be able to add multiple rows of title and photo, thus creating a list of slides for the slide show. </p>

						<p>A more advanced usage of the complex field is shown below:</p>
						<pre class="prettyprint">
Carbon_Field::factory('complex', 'crb_media_item')
	-&gt;add_fields('photograph', array(
		Carbon_Field::factory('image', 'image'),
		Carbon_Field::factory('text', 'caption'),
	))
	-&gt;add_fields('movie', array(
		Carbon_Field::factory('file', 'video'),
		Carbon_Field::factory('text', 'title'),
		Carbon_Field::factory('text', 'length'),
	)),
</pre>
						<p>Here we have to create a list of media items, lets say for an art exhibition. There are two types of items - photos (defined by an <code>image</code> and a <code>caption</code>) and movies (having a <code>title</code>, <code>length</code> and the <code>video</code> file itself). Since items have different properties, we need to define separate group for each one. Groups also must have a name, by which they will be recognized later - <code>photograph</code> and <code>movie</code>.</p>

						<p>As you can see, depending on their usage, complex fields can either contain a single unnamed group or multiple named groups.</p>

						<h3 id="Single_Group" class="left-hash"><a href="#Single_Group">Single group</a></h3>
						<p>To add a single group of fields you use <code>add_fields($fields)</code>, where:</p>
						<dl>
							<dt><code>$fields</code></dt>
							<dd>Numeric array of fields.</dd>
						</dl>
						<pre class="prettyprint">
add_fields(array(
	Carbon_Field::factory('text', 'name'),
	Carbon_Field::factory('text', 'job_title'),
)),
</pre>
						<h3 id="Multiple_Groups" class="left-hash"><a href="#Multiple_Groups">Multiple groups</a></h3>
						<p>To add multiple groups of fields you use <code>add_fields($name, $fields)</code>, where:</p>
						<dl>
							<dt><code>$name</code></dt>
							<dd>Unique name of the group.</dd>

							<dt><code>$fields</code></dt>
							<dd>Numeric array of fields.</dd>
						</dl>
						<pre class="prettyprint">
Carbon_Field::factory('complex', 'crb_job')
	-&gt;add_fields('driver', array(
		Carbon_Field::factory('text', 'name'),
		Carbon_Field::factory('text', 'drivers_license_id'),
	))
	-&gt;add_fields('teacher', array(
		Carbon_Field::factory('image', 'name'),
		Carbon_Field::factory('image', 'years_of_experience'),
	)),
</pre>
						<p>Each call to <code>add_fields($name, $fields)</code> creates a new group and adds it to the complex field.</p>
						<p>You can also give each group a label different from their name using <code>add_fields($name, $label, $fields)</code>.</p>

						<p>All data stored in a complex field is returned as a two-dimensional array with the following format:<p>
						<pre class="prettyprint">
array (
	0 =&gt; array (
		'_type' =&gt; '_photograph',
		'caption' =&gt; 'Lorem Ipsum',
		'image' =&gt; 'http://example.com/wp-content/uploads/2012/12/Jellyfish.jpg',
	),
	1 =&gt; array (
		'_type' =&gt; '_movie',
		'length' =&gt; '1:56',
		'title' =&gt; 'Dolor sit amet',
		'video' =&gt; 'http://example.com/wp-content/uploads/2012/12/video_new.mp4',
	),
	2 =&gt; array (
		'_type' =&gt; '_photograph',
		'caption' =&gt; 'Consectetur adipiscing elit',
		'image' =&gt; 'http://example.com/wp-content/uploads/2012/12/Koala.jpg',
	),
)
</pre>
						<p>Each item represents the values stored by a single group. The name of the group is stored in element with key <code>_type</code>. When the complex field contains one group only, it's type will be an empty string - <code>""</code>.</p>

						<p>Complex field values are retrieved using either <code>carbon_get_post_meta</code> or <code>carbon_get_theme_option</code> (depending on the container it is added to) and passing the string <code>"complex"</code> as <code>$type</code> argument (see <a href="#Types"><i class="icon-hand-right"></i> Types</a>).</p>
						
						<h3 id="Nested_Complex_Fields" class="left-hash"><a href="#Nested_Complex_Fields">Nested Complex Fields</a></h3>
						<p>Complex fields can be nested. The following will define a container that creates multiple slides and allows positioning of multiple text fragments on each slide: </p>
						<pre class="prettyprint">
Carbon_Container::factory('custom_fields', 'Slider Data')
	->show_on_post_type('post')
	->add_fields(array(
		Carbon_Field::factory('complex', 'crb_slides')->add_fields(array(
			Carbon_Field::factory('image', 'image'),
			Carbon_Field::factory('complex', 'slide_fragments')->add_fields(array(
				Carbon_Field::factory('text', 'fragment_text'),
				Carbon_Field::factory('select', 'fragment_position')
					->add_options(array('Top Left', 'Top Right', "Bottom Left", "Bottom Right")),
			))
		)),
	));
</pre>

						<p>Values are retrieved as usual using either <code>carbon_get_post_meta</code> or <code>carbon_get_theme_option</code>. The format of the returned data is a multi-dimensional array, as follows:</p>
						
						<pre class="prettyprint">
array (
	0 =&gt; array (
		'photo' =&gt; 'http://example.com/lorem.jpg',
		'people_on_photo' =&gt; array (
			0 =&gt; array (
				'name' =&gt; 'John',
			),
			1 =&gt; array (
				'name' =&gt; 'Karen',
			),
		)
	),
	1 =&gt; array (
		'photo' =&gt; 'http://example.com/ipsum.jpg',
		'people_on_photo' =&gt; array (
			0 =&gt; array (
				'name' =&gt; 'Paul',
			),
			1 =&gt; array (
				'name' =&gt; 'Kasper',
			),
			2 =&gt; array (
				'name' =&gt; 'Julie',
			),
		)
	),
)
</pre>
					
						<h3 id="Setup_Methods" class="left-hash"><a href="#Setup_Methods">Setup Methods</a></h3>
							<dl>
								<dt><code>add_fields</code></dt>
								<dd>
									This method is identical to Container <code>add_fields</code> method. 
								</dd>

								<dt><code>set_layout($layout = table | list)</code> <strong>Deprecated</strong></dt>
								<dd>
									There are two layouts available for displaying a complex field: 
									<ul>
										<li><code>Carbon_Field_Complex::LAYOUT_TABLE</code>(default) - lists groups as rows. Each field in the group is displayed in a new line with the label first and the user control after it.</li>
										<li><code>Carbon_Field_Complex::LAYOUT_LIST</code> - lists groups as rows and their fields as a columns.</li>
									</ul>
								</dd>

								<dt><code>set_min($min)</code></dt>
								<dd>
									Minimum number of rows. Must be greater than 0. Defaults to <code>-1</code> (no limit).
								</dd>

								<dt><code>set_max($max)</code></dt>
								<dd>
									Maximum number of rows. Must be greater than 0. Defaults to <code>-1</code> (no limit). 
								</dd>

								<dt><code>setup_labels($labels)</code></dt>
								<dd>
									Allows client code to change labels for this complex field. The following items are accepted: 
									<ul>
										<li><strong>Add Row</strong> -- wording of the button for adding new field group. </li>
									</ul>

									Example usage:<pre class="prettyprint">$employees_labels = array(
	'plural_name'=>'Employees',
	'singular_name'=>'Employee',
);
Carbon_Field::factory('complex', 'crb_employee_data')
	-&gt;setup_labels($employees_labels)
	-&gt;set_layout(Carbon_Field_Complex::LAYOUT_TABLE)
	-&gt;add_fields(array(
		Carbon_Field::factory('text', 'name')->help_text('Name of employee'),
		Carbon_Field::factory('text', 'position')->help_text('Position title'),
		Carbon_Field::factory('image', 'image'),
		Carbon_Field::factory('rich_text', 'description'),
	))</pre>
								</dd>

							</dl>

						<h3 id="Data_Storage" class="left-hash"><a href="#Data_Storage">Data Storage</a></h3>
						<p>Complex field values are saved in the database in multiple rows - a row per field per group. To be able to distinguish which value for field is, a special format of the keys (<code>meta_key</code> or <code>option_name</code>) is adopted:</p>
						<p><code>{complex_field_name}_{group_name}-{field_name}_{number}</code>, where</p>
						<dl>
							<dt>complex_field_name</dt>
							<dd>Name of the complex field, as passed to <code>Carbon_Field::factory()</code></dd>

							<dt>group_name</dt>
							<dd>Name of the group as passed to <code>add_fields()</code>, or <code>""</code> if only one group is present.</dd>
							
							<dt>field_name</dt>
							<dd>Name of the field in the group, as passed to <code>Carbon_Field::factory()</code></dd>
							
							<dt>number</dt>
							<dd>Identifies the number of the row this value is part of.</dd>
						</dl>
						<p><span class="label label-info">NB!</span> When in a Custom Fields container, the name of the complex field is prefixed with an underscore, but the name of the field (<code>field_name</code>) is not. Thus, the key format becomes:<br/><code><strong>_</strong>{complex_field_name}_{group_name}-{field_name}_{number}</code></p>
					</div>

					<h2>Advanced Topics</h2>

					<div class="field-docs">
						<h3 id="Extending" class="left-hash"><a href="#Extending">Extending</a></h3>
						<p>Carbon Fields can be easily extended. Each of the Carbon_Field classes is optionally declared, and each function is optionally defined. This way early custom declaration and definitions can be made in your theme or plugin. Also, you can create custom Carbon Fields, Carbon Containers, Carbon Exceptions and others by extending the existing PHP classes.</p>

						<p>On the JavaScript side, the library is designed to be lightweight and flexible and sits on top of <a href="http://backbonejs.org/" target="_blank"><i class="icon-globe"></i> Backbone</a>, providing the framework for building a scalable application.</p>
						
						<p>To get a better understanding of how the library works, checkout our step-by-step guide of <a href="guide.html">how to create a new custom Carbon Field</a>.</p>
					</div>

					<div class="field-docs">
						<h3 id="Templates" class="left-hash"><a href="#Templates">Templates</a></h3>
						<p>Carbon Fields use <a href="http://underscorejs.org/#template" target="_blank"><i class="icon-globe"></i>Underscore template engine</a>. Each field has a <code>template</code> method that prints the Underscore template code.</p>

						<pre class="prettyprint">
class Carbon_Field_Example extends Carbon_Field {
	// Main template
	function template() {
		?&gt;
		&lt;input id="{{{ id }}}" type="text" name="{{{ name }}}" value="{{ value }}" class="regular-text" /&gt;
		&lt;span&gt;This is an example field. &lt;/span&gt;
		&lt;?php
	}
}</pre>

						Some fields have more than one template - in those cases the extra templates should be printed in separate methods and registered via <code>add_template($name, $callback)</code> method. 
						<pre class="prettyprint">
class Carbon_Field_Example extends Carbon_Field {
	function admin_init() {
		// Add the description template
		$this->add_template($this->get_type() . '-Description', array($this, 'template_description'));
	}
	...
	// Description template
	function template_description() {
		?&gt;
		&lt;div class="carbon-description {{{ value ? '' : 'hidden' }}}"&gt;
			&lt;p&gt;Some really helpful description.&lt;/p&gt;
		&lt;/div&gt;
		&lt;?php
	}
}</pre>

						<h4>Template Syntax</h4>
						<dl>
							<dt><code>&lt;# ... #&gt;</code></dt>
							<dd><p>Execute arbitrary JavaScript code.</p></dd>

							<dt><code>{{ ... }}</code></dt>
							<dd><p>Interpolate a value.</p></dd>
							
							<dt><code>{{{ ... }}}</code></dt>
							<dd><p>Interpolate a value, and have it be HTML-escaped.</p></dd>
						</dl>

						<h4>Template Variables</h4>
						<p>The variables that can be used inside a template are added by the <code>to_json()</code> PHP method. Here is an example of adding two new variables (rows &amp; height):</p>
						<pre class="prettyprint">
// Textarea Field PHP Class
class Carbon_Field_Textarea extends Carbon_Field {
	protected $height = 170;
	protected $rows = 0;
	...
	function to_json($load) {
		$field_data = parent::to_json($load);

		$field_data = array_merge($field_data, array(
			'rows'   => $this->rows,
			'height' => $this->height,
		));

		return $field_data;
	}
}</pre>
						<p>Template variables can also be added using <strong>JavaScript</strong>, by extending the <code>templateVariables</code> object. This should be done on the <code>field:beforeRender</code> event. For example:</p>

						<pre class="prettyprint">
// File Field Backbone View
carbon.fields.View.File = carbon.fields.View.extend({
	initialize: function() {
		carbon.fields.View.prototype.initialize.apply(this);

		this.on('field:beforeRender', this.loadDescriptionTemplate);
	},
	...
	/**
	 * Loads the description template and sets it as a variable ("description") for the base template
	 */
	loadDescriptionTemplate: function() {
		var type = this.model.get('type');
		var descTemplate = carbon.template(type + '-Description');

		_.extend(this.templateVariables, {
			description: descTemplate(this.templateVariables)
		});
	}
});</pre>

					</div>

					<div class="field-docs">
						<h3 id="Hooks" class="left-hash"><a href="#Hooks">Hooks</a></h3>

						<p>There are several hooks that allow you to include your custom classes and functionality at the right time, in the right place:</p>

						<h5>General</h5>
						<dl>
							<dt><small>(action)</small> <code>carbon_before_include</code></dt>
							<dd><p>Called before including the main classes and functions.</p></dd>

							<dt><small>(action)</small> <code>carbon_after_include</code></dt>
							<dd><p>Called after including the main classes and functions.</p></dd>
							
							<dt><small>(action)</small> <code>carbon_register_fields</code></dt>
							<dd><p>Called prior to registering the Carbon Fields</p></dd>
							
							<dt><small>(action)</small> <code>carbon_after_register_fields</code></dt>
							<dd><p>Called after all Carbon Fields have been registered</p></dd>
						</dl>

						<h5>Templates</h5>
						<dl>
							<dt><small>(filter)</small> <code>carbon_template</code> <code><small>($hmtl, $name)</small></code></dt>
							<dd><p>Applied to the template html before putting it into the admin footer.</p></dd>

							<dt><small>(filter)</small> <code>carbon_template_{template-name}</code> <code><small>($hmtl)</small></code></dt>
							<dd><p>Same as <code>carbon_template</code>, but you can specify a template name.</p></dd>
						</dl>

						<h5>Relationship &amp; Association Fields</h5>
						<dl>
							<dt><small>(filter)</small> <code>carbon_relationship_title</code> <code><small>($title, $name, $id, $type, $subtype)</small></code></dt>
							<dd>Allows you to modify the title of the relationship / association items. Helpful when implementing custom relationship / association items. Passes the following parameters:
								<ul>
									 <li><em>string</em> <code>$title</code> The unfiltered item title.</li>
									 <li><em>string</em> <code>$name</code> Name of the relationship / association field.</li>
									 <li><em>int</em>    <code>$id</code> The database ID of the item.</li>
									 <li><em>string</em> <code>$type</code> Item type (post, term, user, comment, or a custom one).</li>
									 <li><em>string</em> <code>$subtype</code> Subtype - "page", "post", "category", etc.</li>
								</ul>
							</dd>
							<dt><small>(filter)</small> <code>carbon_relationship_label</code> <code><small>($label, $name, $id, $type, $subtype)</small></code></dt>
							<dd>Allows you to modify the label of the relationship / association items. Helpful when implementing custom relationship / association items, or when you want to change the default label. Passes the following parameters:
								<ul>
									 <li><em>string</em> <code>$label</code> The unfiltered item label.</li>
									 <li><em>string</em> <code>$name</code> Name of the relationship / association field.</li>
									 <li><em>int</em>    <code>$id</code> The database ID of the item.</li>
									 <li><em>string</em> <code>$type</code> Item type (post, term, user, comment, or a custom one).</li>
									 <li><em>string</em> <code>$subtype</code> Subtype - "page", "post", "category", etc.</li>
								</ul>
							</dd>
							<dt><small>(filter)</small> <code>carbon_relationship_comment_length</code> <code><small>($number, $name)</small></code></dt>
							<dd>Allows you to change the number of characters, visible from the comment text in an item. Passes the following parameters:
								<ul>
									<li><em>int</em> <code>$number</code> Number of characters. Default: <strong>30</strong></li>
									<li><em>string</em> <code>$name</code> Name of the relationship / association field.</li>
								</ul>
							</dd>
							<dt><small>(filter)</small> <code>carbon_relationship_options_{name}_post_{post_type}</code> <code><small>($options)</small></code></dt>
							<dd>Allows you to modify the available options of the relationship / association field with name <code>{name}</code> from the <code>{post_type}</code> post type. <br />For example, if you want to filter the <code>page</code> post type options of the <code>crb_relationship</code> field, you would use the following filter: <code>carbon_relationship_options_crb_relationship_post_page</code></dd>
							<dt><small>(filter)</small> <code>carbon_relationship_options_{name}_taxonomy_{taxonomy}</code> <code><small>($options)</small></code></dt>
							<dd>Allows you to modify the available options of the relationship / association field with name <code>{name}</code> from the <code>{taxonomy}</code> taxonomy. <br />For example, if you want to filter the <code>category</code> taxonomy options of the <code>crb_relationship</code> field, you would use the following filter: <code>carbon_relationship_options_crb_relationship_taxonomy_category</code></dd>
							<dt><small>(filter)</small> <code>carbon_relationship_options_{name}_user</code> <code><small>($options)</small></code></dt>
							<dd>Allows you to modify the available options of the relationship / association field with name <code>{name}</code> that are users. <br />For example, if you want to filter the users options of the <code>crb_relationship</code> field, you would use the following filter: <code>carbon_relationship_options_crb_relationship_user</code></dd>
							<dt><small>(filter)</small> <code>carbon_relationship_options_{name}_comment</code> <code><small>($options)</small></code></dt>
							<dd>Allows you to modify the available options of the relationship / association field with name <code>{name}</code> that are comments. <br />For example, if you want to filter the comments options of the <code>crb_relationship</code> field, you would use the following filter: <code>carbon_relationship_options_crb_relationship_comment</code></dd>
							<dt><small>(filter)</small> <code>carbon_relationship_options</code>  <code><small>($options, $name)</small></code></dt>
							<dd>Allows you to filter the available options of a relationship / association field. Passes the following parameters:
								<ul>
									<li><em>array</em> <code>$options</code> Unfiltered options.</li>
									<li><em>string</em> <code>$name</code> Name of the relationship / association field.</li>
								</ul>
							</dd>
						</dl>

						<h5>Gravity Form Field</h5>
						<dl>
							<dt><small>(filter)</small>  <code>crb_gravity_form_options</code> <code><small>($options)</small></code></dt>
							<dd>Applied to the gravity form options.</dd>
						</dl>
					</div>

					<!-- <h2>Advanced Topics (TBD)</h2>
						<h3>Create custom field classes</h3>
						<h3>Create custom containers</h3>
						<h3>How container registration works</h3>
						<h3>Create custom data store</h3> -->

				</div><!--/span-->
			</div><!--/row-->

			<hr>

			<footer>
				<p class="text-center">&copy; 2create 2015</p>
			</footer>

		</div><!--/.fluid-container-->

		<!-- Le javascript
		================================================== -->
		<!-- Placed at the end of the document so the pages load faster -->
		<script src="//code.jquery.com/jquery-1.8.3.min.js"></script>
		<script src="//maxcdn.bootstrapcdn.com/bootstrap/2.2.1/js/bootstrap.min.js"></script>
		<script src="prettify.js"></script>
		<script type="text/javascript">
			jQuery(function($) {
				prettyPrint();
			})
		</script>
	</body>
</html>
